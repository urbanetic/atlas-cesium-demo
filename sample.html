<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>atlas-cesium demo</title>
  <script type="text/javascript">
    less = {
      relativeUrls: true
    };
  </script>
  <link rel="stylesheet/less" href="atlas/resources/atlas.less">
  <link rel="stylesheet/less" href="atlas-cesium/resources/atlas-cesium.less">
  <script src="atlas/lib/less/dist/less-1.7.0.min.js"></script>
  <script src="atlas-cesium/lib/Requirejs/require.js"></script>
  <script>
    "use strict";
    var cesiumAtlas;

    console.debug('Requiring CesiumAtlas');

    require.config({
      baseUrl: '',
      packages: [
        { name: 'atlas/lib', location: 'atlas/lib'},
        { name: 'atlas/assets', location: 'atlas/assets'}, // Only need this for testing
        { name: 'atlas', location: 'atlas/src'},
        { name: 'atlas-cesium/cesium', location: 'atlas-cesium/lib/cesium'},
        { name: 'atlas-cesium/lib', location: 'atlas-cesium/lib'},
        { name: 'atlas-cesium', location: 'atlas-cesium/src'}
      ]/*,
       paths: [
       { name: 'atlas/lib', location: 'atlas/lib'},
       { name: 'atlas/assets', location: 'atlas/assets'}, // Only need this for testing
       { name: 'atlas-cesium/cesium', location: 'atlas-cesium/lib/cesium'},
       { name: 'atlas-cesium/lib', location: 'atlas-cesium/lib'},
       ] */
    });

    require(['atlas-cesium/core/CesiumAtlas',
      'atlas/assets/testWKT'
    ], function(CesiumAtlas, testWKT) {
      console.debug('Creating atlas-cesium');
      cesiumAtlas = new CesiumAtlas();

      console.debug('Attaching atlas-cesium');
      cesiumAtlas.attachTo('cesium');

      var i = 0;
      var args = {};
      args.show = true;
      args.displayMode = 'extrusion';
      testWKT.forEach(function(wkt) {
        args.id = i++;
        args.polygon = {
          vertices: wkt,
          elevation: 0,
          height: 50
        };
        cesiumAtlas.publish('entity/show', args);
      });
      cesiumAtlas._managers.event.handleExternalEvent('camera/zoomTo', {
        position: {
          lat: -37.8,
          lng: 144.96,
          elevation: 2000
        }
      });
    });
  </script>
</head>
<body>
  <div id="cesium"></div>
</body>
</html>